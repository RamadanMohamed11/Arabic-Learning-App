# ูุธุงู ูุชุญ ุงูุญุฑูู - Character Unlock System

## ๐ ุงููุธุงู ุงูุญุงูู

ุชู ุชุทุจูู ูุธุงู ูุชุญ ุงูุญุฑูู ุจูุงุกู ุนูู ุงููุฌุงุญ ูู ุงุฎุชุจุงุฑุงุช ุงููุฑุงุฌุนุฉ.

---

## ๐ฏ ููู ูุนูู ุงููุธุงู

### ุงููุงุนุฏุฉ ุงูุฃุณุงุณูุฉ
- **ูุฌุจ** ุงูุญุตูู ุนูู **100%** (ุฌููุน ุงูุฅุฌุงุจุงุช ุตุญูุญุฉ) ูู ุงุฎุชุจุงุฑ ุงููุฑุงุฌุนุฉ
- ุนูุฏ ุงููุฌุงุญ ุจูุณุจุฉ 100%ุ ูุชู ูุชุญ **ุญุฑู ูุงุญุฏ ุฌุฏูุฏ** (ุฃูู ุญุฑู ูู ุงููุฌููุนุฉ ุงูุชุงููุฉ)

---

## ๐ ุชูุณูู ุงููุฌููุนุงุช

### ุงููุฌููุนุฉ 0 (ุงูุฃููู) - ููุชูุญุฉ ุงูุชุฑุงุถูุงู
- **ุงูุญุฑูู**: ุงุ ุจุ ุชุ ุซ
- **ุงูููุฑุณ**: 0-3

### ุงููุฌููุนุฉ 1 (ุงูุซุงููุฉ)
- **ุงูุญุฑูู**: ุฌุ ุญุ ุฎุ ุฏ
- **ุงูููุฑุณ**: 4-7
- **ูุชู ูุชุญ ุงูุญุฑู ุงูุฃูู (ุฌ)**: ุจุนุฏ ูุฌุงุญ 100% ูู ุงุฎุชุจุงุฑ ุงููุฌููุนุฉ 0

### ุงููุฌููุนุฉ 2 (ุงูุซุงูุซุฉ)
- **ุงูุญุฑูู**: ุฐุ ุฑุ ุฒุ ุณ
- **ุงูููุฑุณ**: 8-11
- **ูุชู ูุชุญ ุงูุญุฑู ุงูุฃูู (ุฐ)**: ุจุนุฏ ูุฌุงุญ 100% ูู ุงุฎุชุจุงุฑ ุงููุฌููุนุฉ 1

### ุงููุฌููุนุฉ 3 (ุงูุฑุงุจุนุฉ)
- **ุงูุญุฑูู**: ุดุ ุตุ ุถุ ุท
- **ุงูููุฑุณ**: 12-15
- **ูุชู ูุชุญ ุงูุญุฑู ุงูุฃูู (ุด)**: ุจุนุฏ ูุฌุงุญ 100% ูู ุงุฎุชุจุงุฑ ุงููุฌููุนุฉ 2

### ุงููุฌููุนุฉ 4 (ุงูุฎุงูุณุฉ)
- **ุงูุญุฑูู**: ุธุ ุนุ ุบุ ู
- **ุงูููุฑุณ**: 16-19
- **ูุชู ูุชุญ ุงูุญุฑู ุงูุฃูู (ุธ)**: ุจุนุฏ ูุฌุงุญ 100% ูู ุงุฎุชุจุงุฑ ุงููุฌููุนุฉ 3

### ุงููุฌููุนุฉ 5 (ุงูุณุงุฏุณุฉ)
- **ุงูุญุฑูู**: ูุ ูุ ูุ ู
- **ุงูููุฑุณ**: 20-23
- **ูุชู ูุชุญ ุงูุญุฑู ุงูุฃูู (ู)**: ุจุนุฏ ูุฌุงุญ 100% ูู ุงุฎุชุจุงุฑ ุงููุฌููุนุฉ 4

### ุงููุฌููุนุฉ 6 (ุงูุณุงุจุนุฉ - ุงูุฃุฎูุฑุฉ)
- **ุงูุญุฑูู**: ูุ ูุ ูุ ู
- **ุงูููุฑุณ**: 24-27
- **ูุชู ูุชุญ ุงูุญุฑู ุงูุฃูู (ู)**: ุจุนุฏ ูุฌุงุญ 100% ูู ุงุฎุชุจุงุฑ ุงููุฌููุนุฉ 5

---

## ๐ ุณูุฑ ุงูุนูู

```
1. ุงููุณุชุฎุฏู ูุจุฏุฃ ุจู 4 ุญุฑูู ููุชูุญุฉ (ุงุ ุจุ ุชุ ุซ)
                โ
2. ูุชุนูู ูุฐู ุงูุญุฑูู ูููุงุฑุณ ุนูููุง
                โ
3. ูุฏุฎู ุงุฎุชุจุงุฑ ุงููุฑุงุฌุนุฉ ูููุฌููุนุฉ 0
                โ
4. ุฅุฐุง ุญุตู ุนูู 100% (4/4 ุตุญูุญุฉ)
                โ
5. โ ูููุชุญ ุงูุญุฑู ุงูุชุงูู (ุฌ)
   โ ูููุชุญ ุงุฎุชุจุงุฑ ุงููุฑุงุฌุนุฉ ูููุฌููุนุฉ 1
   โ ูุชู ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู
                โ
6. ููุฑุฑ ุงูุนูููุฉ ููุญุฑูู ุงูุชุงููุฉ
```

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### ุงููุณุจ ุงููุทููุจุฉ
- **75%** = ุงุฎุชุจุงุฑ ูุงุฌุญ (ุฑุณุงูุฉ "ููุชุงุฒ!")
- **100%** = ุงุฎุชุจุงุฑ ูุซุงูู (ูุชุญ ุงูุญุฑู ุงูุฌุฏูุฏ + ุฑุณุงูุฉ "ูุฐูู! ๐")

### ุงูุฑุณุงุฆู ุงููุนุฑูุถุฉ
- **100%**: "ุฅุฌุงุจุงุช ูุซุงููุฉ! ุชู ูุชุญ ุงูุญุฑู ุงูุชุงูู ๐"
- **75-99%**: "ุฃุญุณูุช! ููุฏ ุฃุชููุช ูุฐู ุงููุฌููุนุฉ"
- **ุฃูู ูู 75%**: "ุงุณุชูุฑ ูู ุงูุชุฏุฑูุจ ูุชุญุณูู ูุชูุฌุชู"

### ุนุฑุถ ุงูุญุฑู ุงูููุชูุญ
ุนูุฏ ุงูุญุตูู ุนูู 100%ุ ูุชู ุนุฑุถ ุตูุฏูู ุฃุฎุถุฑ ูุญุชูู ุนูู:
- ๐ ุฃููููุฉ ุงูููู ุงูููุชูุญ
- ูุต "ุญุฑู ุฌุฏูุฏ ููุชูุญ!"
- ุงูุญุฑู ุงูุฌุฏูุฏ ุจุฎุท ูุจูุฑ

### ุดุฑูุท ุงูุชูุฏู
- ูุชู ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู ุชููุงุฆูุงู ุจุนุฏ:
  - ุฅููุงู ุฃู ูุดุงุท (ุชุชุจุนุ ุชูุฑููุ ุฅูุฎ)
  - ุงููุฌุงุญ ูู ุงุฎุชุจุงุฑ ุงููุฑุงุฌุนุฉ ุจูุณุจุฉ 100%
  - ูุชุญ ุญุฑู ุฌุฏูุฏ
- ุงููุณุจุฉ ุงููุฆููุฉ = (ุนุฏุฏ ุงูุญุฑูู ุงูููุชูุญุฉ / 28) ร 100

---

## ๐๏ธ ุงูุชูุงุตูู ุงูุชูููุฉ

### ุงููููุงุช ุงููุนุฏูุฉ
```
lib/features/exercises/presentation/views/revision_test_view.dart
lib/core/services/user_progress_service.dart
```

### ุงูุชุนุฏููุงุช ุงูุฑุฆูุณูุฉ

#### 1. ุฅุถุงูุฉ UserProgressService
```dart
UserProgressService? _progressService;

Future<void> _loadProgressService() async {
  _progressService = await UserProgressService.getInstance();
}
```

#### 2. ููุทู ูุชุญ ุงูุญุฑู ุงููุงุญุฏ
```dart
Future<void> _checkAndUnlockNextLetters() async {
  if (_progressService == null) return;
  
  final isPerfectScore = _score == _testGroup.questions.length;
  
  if (isPerfectScore) {
    // ุญุณุงุจ ููุฑุณ ุงูุญุฑู ุงูุชุงูู
    final nextLetterIndex = (widget.groupNumber + 1) * 4;
    
    // ูุชุญ ุงูุญุฑู ุงูุชุงูู ููุท
    if (nextLetterIndex < 28) {
      await _progressService!.unlockLetter(nextLetterIndex);
      
      // ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู
      final unlockedCount = _progressService!.getUnlockedLetters().length;
      final progress = (unlockedCount / 28) * 100;
      await _progressService!.setLevel1Progress(progress);
    }
    
    // ูุชุญ ุงููุฌููุนุฉ/ุงูุฏุฑุณ ุงูุชุงูู
    if (widget.groupNumber < 6) {
      await _progressService!.unlockLevel1Lesson(widget.groupNumber + 1);
    }
  }
}
```

#### 3. ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู ุงูุชููุงุฆู (ูู UserProgressService)
```dart
Future<void> completeActivity(int letterIndex, int activityIndex) async {
  final completedActivities = getCompletedActivities();
  completedActivities.add('${letterIndex}_$activityIndex');
  await prefs.setStringList(
    _keyCompletedActivities,
    completedActivities.toList(),
  );
  
  // ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู ุจุนุฏ ุฅููุงู ุฃู ูุดุงุท
  await _updateProgressBar();
}

Future<void> _updateProgressBar() async {
  final unlockedCount = getUnlockedLetters().length;
  final progress = (unlockedCount / 28) * 100;
  await setLevel1Progress(progress);
  
  if (unlockedCount >= 28) {
    await setLevel1Completed(true);
  }
}
```

#### 4. ูุงุฌูุฉ ุงููุชุงุฆุฌ ุงููุญุฏุซุฉ
- ุนุฑุถ ุฑุณุงูุฉ ุฎุงุตุฉ ูููุชูุฌุฉ ุงููุซุงููุฉ
- ุตูุฏูู ุฃุฎุถุฑ ูุนุฑุถ ุงูุญุฑู ุงูููุชูุญ
- ุฃููููุงุช ูุฃููุงู ูููุฒุฉ
- ุชุตููู ูุชุฌุงูุจ ูุน SingleChildScrollView ูุชุฌูุจ overflow

---

## ๐ฎ ูููุณุชูุจู

ุนูุฏูุง ูุชู ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุฌุฏูุฏุฉ:

```dart
// ุณูุชู ุชุนุฏูู ุงูููุทู ููููู:
// 1. ูุฌุจ ุงููุฌุงุญ ูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
// 2. ุจูุณุจุฉ 100% ูู ูู ุงุฎุชุจุงุฑ
// 3. ุซู ูุชู ูุชุญ ุงูุญุฑูู ุงูุชุงููุฉ

// ูุซุงู:
bool allTestsPassed = 
  listeningTestScore == 100 && 
  writingTestScore == 100 && 
  speakingTestScore == 100;

if (allTestsPassed) {
  unlockNextLetters();
}
```

---

## โ ุงูููุงุฆุฏ

1. **ุชุฏุฑุฌ ุชุนูููู**: ุงููุณุชุฎุฏู ูุชุนูู ุจุดูู ุชุฏุฑูุฌู
2. **ุชุญููุฒ**: ุงูุญุตูู ุนูู 100% ููุชุญ ูุญุชูู ุฌุฏูุฏ
3. **ุฅุชูุงู**: ูุถูู ุฅุชูุงู ุงูุญุฑูู ูุจู ุงูุงูุชูุงู
4. **ุชูููู ูุงุถุญ**: ุงููุณุจ ุงููุฎุชููุฉ ุชุนุทู ุชุบุฐูุฉ ุฑุงุฌุนุฉ ูุงุถุญุฉ

---

## ๐ ููุฎุต

- โ ูุธุงู ูุชุญ ุชุฏุฑูุฌู ููุญุฑูู
- โ ูุชุทูุจ 100% ูู ุงูุงุฎุชุจุงุฑ
- โ ุฑุณุงุฆู ุชุญููุฒูุฉ ููุงุถุญุฉ
- โ ุนุฑุถ ูุฑุฆู ููุญุฑูู ุงูุฌุฏูุฏุฉ
- โ ุฌุงูุฒ ููุชูุณุน ุจุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุฌุฏูุฏุฉ

---

ุชุงุฑูุฎ ุงูุชุญุฏูุซ: ุฃูุชูุจุฑ 2025
ุงูุฅุตุฏุงุฑ: 1.0.0
